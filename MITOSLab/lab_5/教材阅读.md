对应章节：
- Chapter 4 (in particular 4.6)

## 知识点总结

- 当CPU无法转换一个虚拟地址时，即相应的用户页表里没有这一项映射，或者相关权限要求不满足时，就会产生我们熟知的缺页错误。根据执行指令的不同，缺页错误又可以细分为三种：
    
    - Load Page Faults：无法转换的虚拟地址位于一条加载（读）指令中。Scause：13

    - Store Page Faults：无法转换的虚拟地址位于一条存储（写）指令中。Scause：15

    - Instruction Page Faults：无法转换的虚拟地址位于一条执行指令中。Scause：12

- RISC-V会将代表缺页错误类型的数字存放进scause寄存器中，同时将无法转换的虚拟地址存放在stval寄存器中。

- Lazy Allocation: 

    1. 用户进程可以调用sbrk请求更多的物理内存,只不过现在内核只是简单地标记该进程的大小已增长（例如增加p->sz），却不急着分配物理内存给它，因此，那些新增长的虚拟地址在页表中是无效的

    2. 接着，使用这些虚拟地址就会引发缺页错误，现在内核再为该虚拟地址分配一页物理内存，并且更新页表。