对应章节：

- Chapter 8: File system

- 8.1-8.3 在lab_8中总结，这里主要是后续知识点

## 知识点总结

- xv6采用数据日志来解决崩溃一致性问题
    
    > 类似InnoDB的redo log + checkpoing

- 组提交Group Commit: 将多个FS系统调用的事务，合并成一个大的事务，然后一次性提交

    - 减少磁盘操作次数，可能可以组织成顺序写

- xv6一次只能处理一个事务，即在完成这次事务的提交之前，不能执行另一个新的系统调用

    而以Linux的ext3为例，可以在提交一个事务的同时，并发地执行另一个系统调用，写入新的事务。

- xv6利用日志进行崩溃恢复原理: 

    - 将每次FS系统调用修改的cache buffer复制一份到磁盘的对应的日志区域块中，并且记录日志区域块中有多少是需要写入磁盘的

    - 当文件系统重新启动时，检查这个记录，如果发现还有日志区域块的每写入磁盘，则进行写入操作

    > 个人理解：如果在将cache buffer复制过程中崩溃，则也无法恢复，但是在复制过程中崩溃，也代表这个事务没有做完，不应该影响文件系统
